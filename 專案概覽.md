# 專案概覽

TSA 會館修繕暨設施管理系統的整體架構與功能說明。

## 📊 系統架構

### 技術棧

- **前端框架**：React 19 + TypeScript
- **構建工具**：Vite 6
- **樣式框架**：Tailwind CSS（CDN）
- **圖表庫**：Recharts
- **圖標庫**：Lucide React
- **AI 服務**：Google Gemini API

### 專案結構

```
tsa-repair-system/
├── components/              # React 組件
│   ├── Dashboard.tsx        # 儀表板 - 數據統計與視覺化
│   ├── Login.tsx           # 登入頁面
│   ├── Layout.tsx          # 主布局組件
│   ├── NewRequestForm.tsx  # 新增工單表單
│   ├── RequestList.tsx     # 工單列表
│   ├── RequestDetail.tsx   # 工單詳情
│   ├── WorkReportForm.tsx  # 工作報告表單
│   ├── MobileSimulation.tsx # 手機模擬介面（LINE 風格）
│   ├── HallManagement.tsx  # 會館管理
│   ├── EquipmentManagement.tsx # 設施管理
│   ├── WaterManagement.tsx # 飲水機管理
│   ├── AEDManagement.tsx   # AED 管理
│   ├── VehicleManagement.tsx # 公務車管理
│   ├── ContractManagement.tsx # 合約管理
│   ├── DisasterReporting.tsx # 災害回報
│   └── ReportManagement.tsx # 報表管理
├── services/               # API 服務
│   └── geminiService.ts    # Gemini AI 服務
├── types.ts               # TypeScript 類型定義
├── constants.tsx          # 常數配置
├── App.tsx               # 主應用組件
├── index.tsx             # 應用入口
└── vite.config.ts        # Vite 配置
```

---

## 🎯 核心功能模組

### 1. 儀表板（Dashboard）

- **數據統計**：工單數量、狀態分布、類別統計
- **圖表視覺化**：使用 Recharts 展示數據趨勢
- **快速操作**：快速新增工單、查看待處理項目

### 2. 工單管理

#### 新增工單（NewRequestForm）
- 支援兩種工單類型：
  - **報修工單**（Volunteer）：臨時故障維修
  - **例行性工單**（Routine）：固定週期維護
- 表單欄位：
  - 工單標題、提報人、會館選擇
  - 類別、優先權
  - 狀況描述（支援 AI 分析）
  - 照片上傳
  - 例行性工單額外欄位：上次執行日期、保養週期、責任職員

#### 工單列表（RequestList）
- 篩選功能：狀態、類別、會館、日期範圍
- 排序功能：按日期、優先權排序
- 批量操作：批量處理、批量結案

#### 工單詳情（RequestDetail）
- 完整資訊展示
- 狀態變更
- 歷史記錄追蹤

#### 工作報告（WorkReportForm）
- 處理方式記錄
- 分流路徑：
  - **內部處理**：三階段流程
  - **法人協助**：四階段流程
- 進度暫存與最終提交

### 3. 設施管理

#### 會館管理（HallManagement）
- 會館基本資料維護
- 區域管理

#### 設施管理（EquipmentManagement）
- 會館設施清單
- 維護記錄

#### 飲水機管理（WaterManagement）
- 飲水機位置與狀態
- 濾心更換記錄

#### AED 管理（AEDManagement）
- AED 設備清單
- 電池與電極片到期提醒
- 廠商資訊管理

#### 公務車管理（VehicleManagement）
- 車輛基本資料
- 里程數追蹤
- 管理人資訊

### 4. 合約管理（ContractManagement）

- 維護合約清單
- 合約到期提醒
- 供應商資訊

### 5. 災害回報（DisasterReporting）

- 緊急災害事件通報
- 會館受損狀況回報
- 處理進度追蹤

### 6. 手機模擬介面（MobileSimulation）

- LINE 風格介面設計
- 線上報修功能
- 完工回報功能
- 災害回報功能
- 照片上傳功能

---

## 🔄 數據流程

### 工單生命週期

```
新增工單 → 待處理（PENDING）
    ↓
進行中（IN_PROGRESS）
    ↓
    ├─→ 內部處理 → 完成 → 結案（CLOSED）
    └─→ 法人協助 → 階段1 → 階段2 → 階段3 → 階段4 → 結案（CLOSED）
```

### 狀態定義

- **PENDING**：待處理
- **IN_PROGRESS**：進行中
- **CLOSED**：已結案

### 處理方式

- **INTERNAL**：內部處理（三階段）
- **LEGAL**：法人協助（四階段）

---

## 🤖 AI 整合

### Gemini AI 服務

**功能：**
- 故障分析與診斷
- 維護建議提供
- 優先權建議

**使用場景：**
- 在新增工單時，填寫狀況描述後可點擊「Gemini 診斷分析」
- AI 會分析描述並建議：
  - 建議的優先權
  - 可能的故障原因
  - 處理建議

**配置：**
- 需要在 `.env.local` 設置 `GEMINI_API_KEY`
- 服務位於 `services/geminiService.ts`

---

## 🎨 UI/UX 設計

### 設計風格

- **現代簡約**：使用 Tailwind CSS 實現
- **響應式設計**：支援桌面、平板、手機
- **深色模式支援**：部分組件支援深色主題
- **動畫效果**：使用 Tailwind 動畫類別

### 顏色系統

- **主色調**：Indigo（`indigo-600`）
- **成功**：Emerald（`emerald-500`）
- **警告**：Amber（`amber-500`）
- **錯誤**：Rose（`rose-500`）
- **背景**：Slate（`slate-50`）

### 字體

- **英文**：Inter
- **中文**：Noto Sans TC
- 透過 Google Fonts CDN 載入

---

## 📱 響應式設計

### 斷點

- **手機**：< 640px
- **平板**：640px - 1024px
- **桌面**：> 1024px

### 適配策略

- 使用 Tailwind 響應式類別（`sm:`, `md:`, `lg:`）
- 手機端使用單欄布局
- 桌面端使用多欄布局

---

## 🔐 安全性

### 環境變數

- `.env.local` 已加入 `.gitignore`
- API Key 不會提交到版本控制

### 數據驗證

- 表單欄位使用 `required` 屬性
- TypeScript 類型檢查

---

## 🚀 性能優化

### 構建優化

- Vite 構建工具，快速開發體驗
- 生產構建時代碼壓縮
- 資源優化與快取策略

### 運行時優化

- React 19 性能優化
- 組件懶加載（如需要）
- 圖片優化

---

## 📝 開發規範

### 程式碼風格

- 使用 TypeScript 嚴格模式
- 函數式組件與 Hooks
- 狀態更新使用函數式更新

### 命名規範

- 組件：PascalCase
- 函數/變數：camelCase
- 常數：UPPER_SNAKE_CASE
- 類型：PascalCase

詳細規範請參考 [開發者協作指南.md](./開發者協作指南.md)

---

## 🔗 相關文檔

- [本地運行指南.md](./本地運行指南.md) - 環境設置
- [開發者協作指南.md](./開發者協作指南.md) - 開發流程
- [常見問題.md](./常見問題.md) - FAQ
- [README.md](./README.md) - 專案說明

---

最後更新：2024

